{% extends 'base.html' %}

{% block title %}Profil bearbeiten - RedFlag Analyzer{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h1 class="text-3xl font-bold text-gray-900 mb-8">‚úèÔ∏è Profil bearbeiten</h1>
    
    <form method="post" class="space-y-6">
        {% csrf_token %}
        
        <!-- Account Informationen -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold mb-4">Account Informationen</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" name="email" value="{{ user.email }}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag"
                           required>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="first_name" class="block text-sm font-medium text-gray-700 mb-2">
                            Vorname (optional)
                        </label>
                        <input type="text" 
                               id="first_name" 
                               name="first_name" 
                               value="{{ user.first_name|default:'' }}"
                               placeholder="Dein Vorname"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                    </div>
                    <div>
                        <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">
                            Nachname (optional)
                        </label>
                        <input type="text" 
                               id="last_name" 
                               name="last_name" 
                               value="{{ user.last_name|default:'' }}"
                               placeholder="Dein Nachname"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                    </div>
                </div>
                
                <div>
                    <label for="city" class="block text-sm font-medium text-gray-700 mb-2">
                        Wohnort/Stadt (optional)
                    </label>
                    <input type="text" 
                           id="city" 
                           name="city" 
                           value="{{ profile.city|default:'' }}"
                           list="cities-list"
                           placeholder="z.B. Berlin"
                           autocomplete="off"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                    <datalist id="cities-list">
                        <option value="Berlin">
                        <option value="Hamburg">
                        <option value="M√ºnchen">
                        <option value="K√∂ln">
                        <option value="Frankfurt am Main">
                        <option value="Stuttgart">
                        <option value="D√ºsseldorf">
                        <option value="Dortmund">
                        <option value="Essen">
                        <option value="Leipzig">
                        <option value="Bremen">
                        <option value="Dresden">
                        <option value="Hannover">
                        <option value="N√ºrnberg">
                        <option value="Duisburg">
                        <option value="Bochum">
                        <option value="Wuppertal">
                        <option value="Bielefeld">
                        <option value="Bonn">
                        <option value="M√ºnster">
                        <option value="Karlsruhe">
                        <option value="Mannheim">
                        <option value="Augsburg">
                        <option value="Wiesbaden">
                        <option value="Gelsenkirchen">
                        <option value="M√∂nchengladbach">
                        <option value="Braunschweig">
                        <option value="Chemnitz">
                        <option value="Kiel">
                        <option value="Aachen">
                        <option value="Halle (Saale)">
                        <option value="Magdeburg">
                        <option value="Freiburg im Breisgau">
                        <option value="Krefeld">
                        <option value="L√ºbeck">
                        <option value="Oberhausen">
                        <option value="Erfurt">
                        <option value="Mainz">
                        <option value="Rostock">
                        <option value="Kassel">
                        <option value="Hagen">
                        <option value="Hamm">
                        <option value="Saarbr√ºcken">
                        <option value="M√ºlheim an der Ruhr">
                        <option value="Potsdam">
                        <option value="Ludwigshafen am Rhein">
                        <option value="Oldenburg">
                        <option value="Leverkusen">
                        <option value="Osnabr√ºck">
                        <option value="Solingen">
                        <option value="Heidelberg">
                        <option value="Herne">
                        <option value="Neuss">
                        <option value="Darmstadt">
                        <option value="Paderborn">
                        <option value="Regensburg">
                        <option value="Ingolstadt">
                        <option value="W√ºrzburg">
                        <option value="F√ºrth">
                        <option value="Wolfsburg">
                        <option value="Offenbach am Main">
                        <option value="Ulm">
                        <option value="Heilbronn">
                        <option value="Pforzheim">
                        <option value="G√∂ttingen">
                        <option value="Bottrop">
                        <option value="Trier">
                        <option value="Recklinghausen">
                        <option value="Reutlingen">
                        <option value="Bremerhaven">
                        <option value="Koblenz">
                        <option value="Bergisch Gladbach">
                        <option value="Jena">
                        <option value="Remscheid">
                        <option value="Erlangen">
                        <option value="Moers">
                        <option value="Siegen">
                        <option value="Hildesheim">
                        <option value="Salzgitter">
                        <!-- √ñsterreich -->
                        <option value="Wien">
                        <option value="Graz">
                        <option value="Linz">
                        <option value="Salzburg">
                        <option value="Innsbruck">
                        <!-- Schweiz -->
                        <option value="Z√ºrich">
                        <option value="Genf">
                        <option value="Basel">
                        <option value="Bern">
                        <option value="Lausanne">
                    </datalist>
                </div>
            </div>
        </div>
        
        <!-- Pers√∂nliche Informationen -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold mb-4">Pers√∂nliche Informationen</h2>
            
            <div class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Geburtsdatum</label>
                        <input type="date" name="birthdate" value="{{ profile.birthdate|date:'Y-m-d' }}" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Geschlecht</label>
                        <select name="gender" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                            <option value="">Keine Angabe</option>
                            <option value="male" {% if profile.gender == 'male' %}selected{% endif %}>M√§nnlich</option>
                            <option value="female" {% if profile.gender == 'female' %}selected{% endif %}>Weiblich</option>
                            <option value="other" {% if profile.gender == 'other' %}selected{% endif %}>Divers</option>
                        </select>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Land</label>
                    <input type="text" name="country" value="{{ profile.country|default:'' }}"
                           list="profile-countries-list" placeholder="Land suchen..."
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                    <datalist id="profile-countries-list">
                        {% include 'partials/countries_datalist.html' %}
                    </datalist>
                </div>
            </div>
        </div>
        
        <!-- Beziehungsinformationen -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold mb-4">Beziehungsinformationen</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Beziehungsstatus</label>
                    <select name="relationship_status" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                        <option value="">Keine Angabe</option>
                        <option value="single" {% if profile.relationship_status == 'single' %}selected{% endif %}>Single</option>
                        <option value="in_relationship" {% if profile.relationship_status == 'in_relationship' %}selected{% endif %}>In einer Beziehung</option>
                        <option value="married" {% if profile.relationship_status == 'married' %}selected{% endif %}>Verheiratet</option>
                        <option value="divorced" {% if profile.relationship_status == 'divorced' %}selected{% endif %}>Geschieden</option>
                        <option value="complicated" {% if profile.relationship_status == 'complicated' %}selected{% endif %}>Es ist kompliziert</option>
                    </select>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Anzahl bisheriger Beziehungen</label>
                        <select name="previous_relationships_count" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                            <option value="">Keine Angabe</option>
                            <option value="0" {% if profile.previous_relationships_count == '0' %}selected{% endif %}>Keine</option>
                            <option value="1-3" {% if profile.previous_relationships_count == '1-3' %}selected{% endif %}>1-3</option>
                            <option value="4-7" {% if profile.previous_relationships_count == '4-7' %}selected{% endif %}>4-7</option>
                            <option value="8+" {% if profile.previous_relationships_count == '8+' %}selected{% endif %}>8+</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Aktuelle Beziehungsdauer (Monate)</label>
                        <input type="number" name="current_relationship_duration" value="{{ profile.current_relationship_duration }}" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag"
                               min="0" placeholder="z.B. 12">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Weitere Informationen -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-bold mb-4">Weitere Informationen</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Bildungsstand</label>
                    <select name="education" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                        <option value="">Keine Angabe</option>
                        <option value="hauptschule" {% if profile.education == 'hauptschule' %}selected{% endif %}>Hauptschule</option>
                        <option value="realschule" {% if profile.education == 'realschule' %}selected{% endif %}>Realschule</option>
                        <option value="abitur" {% if profile.education == 'abitur' %}selected{% endif %}>Abitur</option>
                        <option value="bachelor" {% if profile.education == 'bachelor' %}selected{% endif %}>Bachelor</option>
                        <option value="master" {% if profile.education == 'master' %}selected{% endif %}>Master</option>
                        <option value="phd" {% if profile.education == 'phd' %}selected{% endif %}>PhD/Doktor</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Wie hast du von uns erfahren? (optional)</label>
                    <select name="referral_source" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-flag focus:border-red-flag">
                        <option value="">Keine Angabe</option>
                        <option value="google" {% if profile.referral_source == 'google' %}selected{% endif %}>Google Suche</option>
                        <option value="instagram" {% if profile.referral_source == 'instagram' %}selected{% endif %}>Instagram</option>
                        <option value="tiktok" {% if profile.referral_source == 'tiktok' %}selected{% endif %}>TikTok</option>
                        <option value="facebook" {% if profile.referral_source == 'facebook' %}selected{% endif %}>Facebook</option>
                        <option value="twitter_x" {% if profile.referral_source == 'twitter_x' %}selected{% endif %}>Twitter/X</option>
                        <option value="youtube" {% if profile.referral_source == 'youtube' %}selected{% endif %}>YouTube</option>
                        <option value="reddit" {% if profile.referral_source == 'reddit' %}selected{% endif %}>Reddit</option>
                        <option value="friend" {% if profile.referral_source == 'friend' %}selected{% endif %}>Freund/Bekannter</option>
                        <option value="podcast" {% if profile.referral_source == 'podcast' %}selected{% endif %}>Podcast</option>
                        <option value="blog" {% if profile.referral_source == 'blog' %}selected{% endif %}>Blog/Artikel</option>
                        <option value="advertisement" {% if profile.referral_source == 'advertisement' %}selected{% endif %}>Online-Werbung</option>
                        <option value="app_store" {% if profile.referral_source == 'app_store' %}selected{% endif %}>App Store</option>
                        <option value="influencer" {% if profile.referral_source == 'influencer' %}selected{% endif %}>Influencer-Empfehlung</option>
                        <option value="news" {% if profile.referral_source == 'news' %}selected{% endif %}>Nachrichten/Presse</option>
                        <option value="other" {% if profile.referral_source == 'other' %}selected{% endif %}>Sonstiges</option>
                    </select>
                </div>
            </div>
        </div>
        
        <!-- Buttons -->
        <div class="flex gap-4">
            <button type="submit" 
                    class="flex-1 bg-red-flag hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition transform hover:scale-105">
                üíæ √Ñnderungen speichern
            </button>
            <a href="{% url 'accounts:profile' %}" 
               class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-lg text-center transition">
                Abbrechen
            </a>
        </div>
    </form>
</div>
{% endblock %}
